module.exports=[89186,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(54161),f=a.i(40695),g=a.i(3130),h=a.i(46143),i=a.i(65733),j=a.i(5522),k=a.i(87682),l=a.i(50463),m=a.i(88237),n=a.i(87271),o=a.i(84505),p=a.i(81010),q=a.i(24987),r=a.i(15618),s=a.i(87532),t=a.i(13749),u=a.i(50522),v=a.i(77156),w=a.i(99464),x=a.i(81560),y=a.i(9941),z=a.i(24669),A=a.i(90166),B=a.i(67900),C=a.i(38632),D=a.i(62213),D=D,E=a.i(18767);function F(){let a,F=(0,d.useRouter)(),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(null),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)("All"),[W,X]=(0,c.useState)("All"),[Y,Z]=(0,c.useState)(new Set),[$,_]=(0,c.useState)("createdAt"),[aa,ab]=(0,c.useState)("desc"),[ac,ad]=(0,c.useState)(1);(0,c.useEffect)(()=>{(async()=>{J(!0),L(null);try{let a=await (0,E.getProperties)();H(a||[])}catch(a){L(a instanceof Error?a.message:"Failed to load properties")}finally{J(!1)}})()},[]);let ae=(0,c.useMemo)(()=>{let a=G.length,b=G.filter(a=>"FOR_RENT"===a.status).length,c=G.filter(a=>"FOR_SALE"===a.status).length,d=G.filter(a=>"RENTED"===a.status).length,e=G.filter(a=>"SOLD"===a.status).length;return{total:a,forRent:b,forSale:c,rented:d,sold:e,featured:G.filter(a=>a.is_featured).length,totalValue:G.reduce((a,b)=>a+(Number(b.price)||0),0)}},[G]),af=(0,c.useMemo)(()=>{let a=S.toLowerCase().trim(),b=G.filter(b=>{let c=b.title?.toLowerCase()??"",d=b.address?.toLowerCase()??"",e=b.city?.toLowerCase()??"",f=b.country?.toLowerCase()??"",g=!a||c.includes(a)||d.includes(a)||e.includes(a)||f.includes(a),h="All"===U||b.property_type===U,i="All"===W||b.status===W;return g&&h&&i});return b.sort((a,b)=>{let c,d;switch($){case"title":c=a.title?.toLowerCase()??"",d=b.title?.toLowerCase()??"";break;case"price":c=Number(a.price)||0,d=Number(b.price)||0;break;case"status":c=a.status??"",d=b.status??"";break;case"city":c=a.city?.toLowerCase()??"",d=b.city?.toLowerCase()??"";break;case"createdAt":c=a.createdAt?new Date(a.createdAt).getTime():0,d=b.createdAt?new Date(b.createdAt).getTime():0;break;default:return 0}return c<d?"asc"===aa?-1:1:c>d?"asc"===aa?1:-1:0}),b},[G,S,W,U,$,aa]),ag=Math.ceil(af.length/10),ah=(0,c.useMemo)(()=>{let a=(ac-1)*10;return af.slice(a,a+10)},[af,ac]),ai=a=>{$===a?ab("asc"===aa?"desc":"asc"):(_(a),ab("asc"))},aj=async()=>{if(Q)try{N(Q),await (0,E.deleteProperty)(Q),H(a=>a.filter(a=>a.id!==Q)),Z(a=>{let b=new Set(a);return b.delete(Q),b}),P(!1),R(null)}catch(a){L(a instanceof Error?a.message:"Failed to delete property")}finally{N(null)}},ak=async()=>{if(0!==Y.size&&window.confirm(`Delete ${Y.size} selected properties?`))try{let a=Array.from(Y).map(a=>(0,E.deleteProperty)(a));await Promise.all(a),H(a=>a.filter(a=>!Y.has(a.id))),Z(new Set)}catch(a){L(a instanceof Error?a.message:"Failed to delete properties")}},al=ah.length>0&&ah.every(a=>Y.has(a.id));return ah.some(a=>Y.has(a.id)),(0,b.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 lg:p-8",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Properties"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your property portfolio"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[Y.size>0&&(0,b.jsxs)(f.Button,{variant:"destructive",size:"sm",onClick:ak,children:[(0,b.jsx)(x.Trash2,{className:"mr-2 h-4 w-4"}),"Delete (",Y.size,")"]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>{let a=encodeURI("data:text/csv;charset=utf-8,"+["ID,Title,Type,Status,Price,Currency,City,Country,Address",...af.map(a=>[a.id,`"${a.title}"`,a.property_type,a.status,a.price,a.currency,`"${a.city}"`,`"${a.country}"`,`"${a.address}"`].join(","))].join("\n")),b=document.createElement("a");b.setAttribute("href",a),b.setAttribute("download",`properties-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(b),b.click(),document.body.removeChild(b)},disabled:0===af.length,children:[(0,b.jsx)(o.Download,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,b.jsxs)(f.Button,{className:"bg-primary text-primary-foreground hover:bg-primary/90",onClick:()=>F.push("/properties/new"),children:[(0,b.jsx)(r.Plus,{className:"mr-2 h-4 w-4"}),"Add Property"]})]})]}),(0,b.jsxs)("div",{className:"mb-6 grid gap-4 md:grid-cols-2 lg:grid-cols-6",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Total Properties"}),(0,b.jsx)(B.Building2,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:ae.total}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"All properties"})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"For Rent"}),(0,b.jsx)(p.Home,{className:"h-4 w-4 text-amber-600"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:ae.forRent}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Available for rent"})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"For Sale"}),(0,b.jsx)(z.TrendingUp,{className:"h-4 w-4 text-emerald-600"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:ae.forSale}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Available for sale"})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Rented"}),(0,b.jsx)(p.Home,{className:"h-4 w-4 text-blue-600"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:ae.rented}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently rented"})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Featured"}),(0,b.jsx)(z.TrendingUp,{className:"h-4 w-4 text-orange-600"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:ae.featured}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Featured properties"})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Total Value"}),(0,b.jsx)(A.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsxs)(g.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:(a=ae.totalValue,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a))}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Portfolio value"})]})]})]}),(0,b.jsxs)(g.Card,{className:"mb-6",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.CardTitle,{className:"text-lg font-semibold",children:"Properties"}),(0,b.jsxs)(g.CardDescription,{children:[af.length," of ",G.length," properties"]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,b.jsx)(s.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(j.Input,{value:S,onChange:a=>T(a.target.value),placeholder:"Search properties...",className:"pl-9"}),S&&(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 h-7 w-7 -translate-y-1/2",onClick:()=>T(""),children:(0,b.jsx)(D.default,{className:"h-4 w-4"})})]}),(0,b.jsxs)(k.Select,{value:W,onValueChange:X,children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(k.SelectValue,{placeholder:"Status"})}),(0,b.jsx)(k.SelectContent,{children:["All","FOR_RENT","FOR_SALE","RENTED","SOLD"].map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]}),(0,b.jsxs)(k.Select,{value:U,onValueChange:V,children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(k.SelectValue,{placeholder:"Type"})}),(0,b.jsx)(k.SelectContent,{children:["All","APARTMENT","HOUSE","STUDIO","OFFICE","LAND"].map(a=>(0,b.jsx)(k.SelectItem,{value:a,children:a},a))})]})]})]})}),(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:I?(0,b.jsx)("div",{className:"p-6 space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(l.Skeleton,{className:"h-12 w-12 rounded-lg"}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsx)(l.Skeleton,{className:"h-4 w-[200px]"}),(0,b.jsx)(l.Skeleton,{className:"h-4 w-[300px]"})]}),(0,b.jsx)(l.Skeleton,{className:"h-8 w-20"})]},c))}):K?(0,b.jsx)("div",{className:"p-8 text-center",children:(0,b.jsxs)("div",{className:"rounded-lg border border-destructive/50 bg-destructive/5 p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-destructive",children:K}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]})}):0===af.length?(0,b.jsx)("div",{className:"p-12",children:(0,b.jsxs)(n.Empty,{children:[(0,b.jsxs)(n.EmptyHeader,{children:[(0,b.jsx)(p.Home,{className:"h-12 w-12 text-muted-foreground"}),(0,b.jsx)(n.EmptyTitle,{children:"No properties found"}),(0,b.jsx)(n.EmptyDescription,{children:S||"All"!==U||"All"!==W?"Try adjusting your filters or search terms.":"Get started by adding your first property."})]}),!S&&"All"===U&&"All"===W&&(0,b.jsxs)(f.Button,{onClick:()=>F.push("/properties/new"),className:"mt-4",children:[(0,b.jsx)(r.Plus,{className:"mr-2 h-4 w-4"}),"Add Property"]})]})}):(0,b.jsxs)(m.Table,{children:[(0,b.jsx)(m.TableHeader,{className:"bg-muted/50",children:(0,b.jsxs)(m.TableRow,{children:[(0,b.jsx)(m.TableHead,{className:"w-12",children:(0,b.jsx)(h.Checkbox,{checked:al,onCheckedChange:a=>{a?Z(new Set(ah.map(a=>a.id))):Z(new Set)},"aria-label":"Select all properties"})}),(0,b.jsx)(m.TableHead,{className:"w-20",children:"Image"}),(0,b.jsx)(m.TableHead,{children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-8 -ml-3 data-[state=open]:bg-accent",onClick:()=>ai("title"),children:["Property",(0,b.jsx)(y.ArrowUpDown,{className:"ml-2 h-3 w-3"})]})}),(0,b.jsx)(m.TableHead,{children:"Location"}),(0,b.jsx)(m.TableHead,{children:"Type"}),(0,b.jsx)(m.TableHead,{children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-8 -ml-3 data-[state=open]:bg-accent",onClick:()=>ai("price"),children:["Price",(0,b.jsx)(y.ArrowUpDown,{className:"ml-2 h-3 w-3"})]})}),(0,b.jsx)(m.TableHead,{children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",className:"h-8 -ml-3 data-[state=open]:bg-accent",onClick:()=>ai("status"),children:["Status",(0,b.jsx)(y.ArrowUpDown,{className:"ml-2 h-3 w-3"})]})}),(0,b.jsx)(m.TableHead,{children:"Featured"}),(0,b.jsx)(m.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(m.TableBody,{children:ah.map(a=>{var c,d,g;let i,j;return(0,b.jsxs)(m.TableRow,{className:"hover:bg-muted/40",children:[(0,b.jsx)(m.TableCell,{children:(0,b.jsx)(h.Checkbox,{checked:Y.has(a.id),onCheckedChange:b=>{var c;let d;return c=a.id,d=new Set(Y),void(b?d.add(c):d.delete(c),Z(d))},"aria-label":`Select ${a.title}`})}),(0,b.jsx)(m.TableCell,{children:a.images&&a.images.length>0?(0,b.jsx)("div",{className:"h-12 w-12 overflow-hidden rounded-lg border",children:(0,b.jsx)("img",{src:a.images[0].url,alt:a.title,className:"h-full w-full object-cover"})}):(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg border bg-muted",children:(0,b.jsx)(C.Image,{className:"h-5 w-5 text-muted-foreground"})})}),(0,b.jsx)(m.TableCell,{children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold text-foreground",children:a.title}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:(i=a.id,`PROP-${i.slice(0,6).toUpperCase()}`)})]})}),(0,b.jsx)(m.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[(0,b.jsx)(q.MapPin,{className:"h-3.5 w-3.5"}),(0,b.jsxs)("span",{className:"max-w-[200px] truncate",children:[a.address?`${a.address}, `:"",a.city,", ",a.country]})]})}),(0,b.jsx)(m.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"outline",className:"font-normal",children:a.property_type})}),(0,b.jsx)(m.TableCell,{className:"font-semibold text-foreground",children:(c=a.price,d=a.currency,g=a.payment_frequency,j=(Number(c)||0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),`${d} ${j}${g?` / ${g.toLowerCase()}`:""}`)}),(0,b.jsx)(m.TableCell,{children:(0,b.jsx)(e.Badge,{className:{FOR_RENT:"bg-amber-50 text-amber-700 border border-amber-100 dark:bg-amber-950 dark:text-amber-300",FOR_SALE:"bg-emerald-50 text-emerald-700 border border-emerald-100 dark:bg-emerald-950 dark:text-emerald-300",RENTED:"bg-blue-50 text-blue-700 border border-blue-100 dark:bg-blue-950 dark:text-blue-300",SOLD:"bg-gray-200 text-gray-800 border border-gray-300 dark:bg-gray-800 dark:text-gray-300"}[a.status]??"bg-muted text-foreground",children:a.status.replace("_"," ")})}),(0,b.jsx)(m.TableCell,{children:a.is_featured?(0,b.jsx)(e.Badge,{className:"bg-orange-50 text-orange-700 border border-orange-100 dark:bg-orange-950 dark:text-orange-300",children:"Featured"}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"â€”"})}),(0,b.jsx)(m.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-1",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>F.push(`/properties/${a.id}`),title:"View",children:(0,b.jsx)(v.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>F.push(`/properties/${a.id}/edit`),title:"Edit",children:(0,b.jsx)(w.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",disabled:M===a.id,onClick:()=>{R(a.id),P(!0)},title:"Delete",children:(0,b.jsx)(x.Trash2,{className:"h-4 w-4"})})]})})]},a.id)})})]})})})]}),!I&&!K&&af.length>0&&(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(ac-1)*10+1," to ",Math.min(10*ac,af.length)," of"," ",af.length," properties"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",disabled:1===ac,onClick:()=>ad(a=>Math.max(1,a-1)),children:[(0,b.jsx)(t.ChevronLeft,{className:"mr-2 h-4 w-4"}),"Previous"]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(ag,5)},(a,c)=>{let d;return d=ag<=5||ac<=3?c+1:ac>=ag-2?ag-4+c:ac-2+c,(0,b.jsx)(f.Button,{size:"sm",variant:ac===d?"default":"outline",onClick:()=>ad(d),className:"min-w-[40px]",children:d},d)})}),(0,b.jsxs)(f.Button,{size:"sm",variant:"outline",disabled:ac===ag,onClick:()=>ad(a=>Math.min(ag,a+1)),children:["Next",(0,b.jsx)(u.ChevronRight,{className:"ml-2 h-4 w-4"})]})]})]}),(0,b.jsx)(i.Dialog,{open:O,onOpenChange:P,children:(0,b.jsxs)(i.DialogContent,{children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"Delete Property"}),(0,b.jsx)(i.DialogDescription,{children:"Are you sure you want to delete this property? This action cannot be undone."})]}),(0,b.jsxs)(i.DialogFooter,{children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>P(!1),disabled:null!==M,children:"Cancel"}),(0,b.jsx)(f.Button,{variant:"destructive",onClick:aj,disabled:null!==M,children:M?"Deleting...":"Delete"})]})]})})]})}a.s(["PropertiesPage",()=>F],89186)}];

//# sourceMappingURL=components_dashboard_pages_properties-page_tsx_109f4f07._.js.map